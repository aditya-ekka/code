"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8041],{2780:(e,n,t)=>{t.d(n,{V:()=>r});var a=t(74848),s=t(82479);let r=e=>{let{cardImg:n,className:t,backgroundColors:r}=e;return(0,a.jsxs)("div",{className:(0,s.xF)("pointer-events-none h-full w-full bg-[#FCFAFE] dark:bg-[#08050D]",t),children:[n&&(0,a.jsx)("img",{src:n,alt:"",className:"h-full w-full object-fill opacity-[0.08] blur-2xl"}),!n&&r&&(0,a.jsx)("div",{className:"h-full w-full opacity-[0.08] blur-2xl",style:{background:`linear-gradient(${r[0]}, ${r[1]})`}}),(0,a.jsx)("div",{className:"dark:to-sd-fixed-black to-sd-fixed-white absolute inset-0 h-full w-full bg-gradient-to-b from-transparent"})]})}},75107:(e,n,t)=>{t.d(n,{S:()=>g});var a=t(74848),s=t(84038),r=t(96540),i=t(82479),l=t(72556),o=t(5596),u=t(3519),c=t(90525),d=t(59544);let g=e=>{let{contestData:n,ongoingStatus:t,className:g,children:m}=e,{t:x}=(0,s.Bd)("contest",{keyPrefix:"rankingPage"}),f=t===o.c.END,{rankingUpdated:h,unrated:p}=n??{},{isContestOngoing:v,isVirtualContest:k}=(0,d.B)(),y=(0,l._)(e=>{e&&c.K.contestRankingRankInfoClick({contest_is_virtual:String(k),contest_is_ongoing:String(v)})}),j=(0,r.useMemo)(()=>f?p?(0,a.jsx)("div",{children:(0,a.jsx)("p",{children:x("rankTipUnrated")})}):h?(0,a.jsx)("div",{children:(0,a.jsx)("p",{children:x("rankTipUpdated")})}):(0,a.jsx)("div",{children:(0,a.jsx)("p",{children:x("rankTipPending")})}):(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:x("rankTipTitle")}),(0,a.jsxs)("ul",{className:"list-disc [&>li]:ml-5",children:[(0,a.jsx)("li",{children:x("rankTip1")}),(0,a.jsx)("li",{children:x("rankTip2")})]})]}),[f,p,h,x]);return(0,a.jsx)(u.m_,{className:(0,i.xF)("max-w-[260px]",g),label:j,onOpenChange:y,children:(0,a.jsx)("div",{children:m})})}},14815:(e,n,t)=>{function a(e){let n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e)??"",t=parseInt(n[1],16),a=parseInt(n[2],16),s=parseInt(n[3],16),r=Math.max(t,a,s),i=Math.min(t,a,s),l=r-i,o=0;switch(r){case i:o=0;break;case t:o=(a-s+l*(a<s?6:0))/(6*l);break;case a:o=(s-t+2*l)/(6*l);break;case s:o=(t-a+4*l)/(6*l)}return{h:360*o,s:100*(0===r?0:l/r),v:r/255*100}}function s(e){let{h:n,s:t,v:a}=e,s=t/100*(a/100),r=(2-t/100)*a/100;return{h:n/360*360,s:100*(s/=r<=1?r:2-r),l:100*(r/=2)}}t.d(n,{W:()=>r});let r=e=>{let{primaryHex:n,secondaryHex:t}=e,{h:r,s:i,v:l}=a(n),o=r>0&&r<=80||r>120&&r<=160||r>240&&r<=320?1:-1,u=r>25&&r<210,c=s({h:r,s:i,v:l}),d=t?s(a(t)):s({h:(r+15*o+360)%360,s:Math.max(i-30,0),v:100}),g=s({h:(r+30*o+360)%360,s:Math.max(i-50,0),v:100});return{"--ranking-primary":`${c.h} ${c.s}% ${c.l}%`,"--ranking-secondary":`${d.h} ${d.s}% ${d.l}%`,"--ranking-highlight":`${g.h} ${g.s}% ${g.l}%`,"--ranking-foreground":u?"0 0% 10%":"0 0% 96%"}}},78287:(e,n,t)=>{t.d(n,{b:()=>I});var a=t(74848),s=t(86715),r=t(37069),i=t(84038),l=t(96540),o=t(31261),u=t(72556),c=t(82479),d=t(85579),g=t(5596),m=t(90525),x=t(72187),f=t(79656),h=t(36698),p=t(63864),v=t(3519),k=t(76033),y=t(28140),j=t(37763),_=t(59544);let b=e=>{let{children:n,className:t}=e;return(0,a.jsx)("div",{className:(0,c.xF)("even:bg-fill-quaternary flex h-[50px] min-w-[fit-content] items-start rounded-r-lg",t),children:n})},w=e=>{let{questions:n,contestSlug:t,className:s}=e,{t:r}=(0,i.Bd)("contest",{keyPrefix:"rankingPage"}),{isContestOngoing:l,isVirtualContest:o}=(0,_.B)(),c=(0,u._)(()=>{m.K.contestRankingQuestionClick({contest_is_virtual:String(o),contest_is_ongoing:String(l)})}),d=(0,u._)(e=>{e&&m.K.contestRankingTimeInfoClick({contest_is_virtual:String(o),contest_is_ongoing:String(l)})});return(0,a.jsxs)(b,{className:s,children:[(0,a.jsx)(j.NT,{children:r("name")}),(0,a.jsx)(j.Q5,{children:r("score")}),(0,a.jsxs)(j.FU,{className:"flex items-center gap-0.5",children:[(0,a.jsx)("div",{children:r("finishTime")}),(0,a.jsx)(v.m_,{className:"max-w-[240px]",label:r("finishTimeTip"),onOpenChange:d,children:(0,a.jsx)("div",{children:(0,a.jsx)(k.d,{variant:"12px",padding:"square",icon:f.iW_})})})]}),n.map((e,n)=>(0,a.jsx)(j.GG,{children:(0,a.jsxs)(p.N,{href:x.f0.contestQuestion(t,e.titleSlug),isExternal:!0,onClick:c,children:[r("questionPrefix"),n+1," (",e.credit,")"]})},e.id))]})},S=e=>{var n;let{isContestOngoing:t,rankingData:s,contestData:r,isSelf:i,isDetail:l,rankingRegion:o}=e,u=i||!r.isVirtual?null==r?void 0:r.startTime:null==r?void 0:r.originStartTime,d=(null===(n=(0,y.y)())||void 0===n?void 0:n.data)&&!t;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.i$,{rankingData:s,isSelf:i,rankingRegion:o,isDetail:l,isVirtual:r.isVirtual}),(0,a.jsx)(j.hm,{score:null==s?void 0:s.score,isDetail:l,className:(0,c.xF)({"w-[80px] min-w-[none] max-w-[none] flex-none":!l})}),(0,a.jsx)(j.qA,{finishTime:null==s?void 0:s.finishTime,startTime:u,className:(0,c.xF)({"w-[100px] min-w-[none] max-w-[none] flex-none":!l})}),l?null==r?void 0:r.questions.map(e=>{var n;return(0,a.jsx)(j.f3,{username:null==s?void 0:s.userStatus.username,userSlug:null==s?void 0:s.userStatus.userSlug,submission:null==s?void 0:s.submissions[e.questionId],dataRegion:null==s?void 0:s.region,hasReplay:(null==s?void 0:null===(n=s.replays)||void 0===n?void 0:n[e.questionId])&&d,questionSlug:e.titleSlug,startTime:u,isSelf:i},e.questionId)}):(0,a.jsx)(j.Ig,{rankingData:s,contestData:r})]})},N=e=>{let{rankingData:n,contestData:t,className:s,isSelf:i,index:o,isDetail:u,isContestOngoing:d,rankingRegion:g}=e,[m,x]=(0,l.useState)(!1),[f,p]=(0,l.useState)(n),v=30*o;return(0,l.useEffect)(()=>{if(!(0,h.A)(n,f)){if(!d){p((0,r.A)(n));return}x(!0),setTimeout(()=>{x(!1),p((0,r.A)(n))},500+v)}},[n]),(0,a.jsx)(b,{className:(0,c.xF)("overflow-hidden",{"from-ranking-primary/0 to-ranking-secondary/20 relative bg-gradient-to-b":i},s),children:(0,a.jsx)("div",{className:(0,c.xF)("flex h-[50px] w-full min-w-[fit-content] items-start","transition-all duration-500 ease-out",{"translate-y-[50px] opacity-0":m}),style:{transitionDelay:m?`${v}ms`:""},children:(0,a.jsx)(S,{isContestOngoing:d,rankingData:f,contestData:t,isSelf:i,isDetail:u,rankingRegion:g})})})};var T=t(75107);let C=e=>{let{className:n}=e;return(0,a.jsx)("svg",{width:"9",height:"6",viewBox:"0 0 9 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:n,children:(0,a.jsx)("path",{d:"M5.26562 0.734375L8.26562 3.73438C8.47656 3.94531 8.54688 4.27344 8.42969 4.55469C8.3125 4.83594 8.03125 5.02344 7.75 5.02344H1.75C1.44531 5.02344 1.16406 4.83594 1.04688 4.55469C0.929688 4.27344 1 3.94531 1.21094 3.73438L4.21094 0.734375C4.49219 0.429688 4.98438 0.429688 5.26562 0.734375Z",fill:"currentColor"})})},E=e=>{let{children:n,className:t}=e;return(0,a.jsx)("div",{className:(0,c.xF)("text-text-secondary flex h-[50px] w-[94px] flex-none items-center p-4 pl-7 font-medium",t),children:n})},D=e=>{let{rankingData:n,className:t,isSelf:s,index:i,isContestOngoing:o}=e,[u,d]=(0,l.useState)(!1),[g,m]=(0,l.useState)(n),x=30*i;return(0,l.useEffect)(()=>{if(!(0,h.A)(n,g)){if(!o){m((0,r.A)(n));return}d(!0),setTimeout(()=>{d(!1),m((0,r.A)(n))},500+x)}},[n]),(0,a.jsx)("div",{className:(0,c.xF)("even:bg-fill-quaternary text-text-primary flex h-[50px] w-[94px] flex-none gap-2 overflow-hidden rounded-l-lg font-medium",{"from-ranking-primary/0 to-ranking-secondary/20 relative bg-gradient-to-b":s},t),children:(0,a.jsx)("div",{className:(0,c.xF)("flex h-[50px] w-full items-center gap-2 p-4 pl-3 pr-5","transition-all duration-500 ease-out",{"translate-y-[50px] opacity-0":u}),style:{transitionDelay:u?`${x}ms`:""},children:g?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-2",children:g.up&&(0,a.jsx)(C,{className:"text-sd-timer-green w-full"})}),(0,a.jsx)("div",{className:(0,c.xF)({"bg-[linear-gradient(180deg,hsl(var(--ranking-secondary))_7.5%,hsl(var(--ranking-primary))_84%)] bg-clip-text font-bold text-transparent":g.rank<=2}),children:g.rank+1})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-2"}),(0,a.jsx)("div",{className:"bg-fill-quaternary h-[4px] w-[20px] rounded-full"})]})})})},$=e=>{let{rankingsData:n,contestData:t,myRanking:s,isDetail:r,page:l,isContestOngoing:o,hideBody:u,rankingRegion:d,ongoingStatus:g,myRankingIndex:m}=e,{t:x}=(0,i.Bd)("contest",{keyPrefix:"rankingPage"});return(0,a.jsxs)("div",{className:"flex w-[94px] flex-none flex-col",children:[r&&(0,a.jsxs)(E,{className:(0,c.xF)("flex items-center gap-0.5",{"opacity-0":!t.questions.length}),children:[(0,a.jsx)("div",{children:x("rank")}),(0,a.jsx)(T.S,{contestData:t,ongoingStatus:g,children:(0,a.jsx)(k.d,{variant:"12px",padding:"square",icon:f.iW_})})]}),r&&!!s&&(0,a.jsx)(D,{rankingData:s,isSelf:!0,index:0,isContestOngoing:o,className:(0,c.xF)("transition-opacity",{"opacity-0":u})}),n.map((e,n)=>(0,a.jsx)(D,{rankingData:e,isSelf:!r&&n===m,index:n,isContestOngoing:o,className:(0,c.xF)("transition-opacity",{"opacity-0":u})},`${d}-${l}-${n}`))]})};var R=t(13814);let q=e=>{let{animate:n,width:t,height:s,strokeWidth:r=1}=e,[i]=(0,l.useState)((0,R.BI)()),o=(0,l.useRef)(null);return(0,l.useEffect)(()=>{var e,t;n?null===(e=o.current)||void 0===e||e.beginElement():null===(t=o.current)||void 0===t||t.endElement()},[n]),(0,a.jsxs)("svg",{width:t,height:s,viewBox:`0 0 ${t} ${s}`,xmlns:"http://www.w3.org/2000/svg",className:"absolute inset-0",children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:`stroke-${i}`,x1:"0",x2:"1",y1:"0",y2:"0",gradientTransform:"rotate(-45, 0.5, 0.5)",children:[(0,a.jsx)("animateTransform",{ref:o,attributeName:"gradientTransform",type:"rotate",from:"-45 0.5 0.5",to:"135 0.5 0.5",dur:"4s",repeatCount:"indefinite",begin:"indefinite"}),(0,a.jsx)("stop",{offset:"0.0",stopColor:"hsl(var(--ranking-primary))",stopOpacity:"0"}),(0,a.jsx)("stop",{offset:"0.25",stopColor:"hsl(var(--ranking-primary))"}),(0,a.jsx)("stop",{offset:"0.5",stopColor:"hsl(var(--ranking-highlight))"}),(0,a.jsx)("stop",{offset:"0.75",stopColor:"hsl(var(--ranking-primary))"}),(0,a.jsx)("stop",{offset:"1.0",stopColor:"hsl(var(--ranking-primary))",stopOpacity:"0"})]})}),(0,a.jsx)("rect",{width:`${Math.max(t-r,0)}`,height:`${Math.max(s-r,0)}`,x:`${r/2}`,y:`${r/2}`,rx:"5",ry:"5",strokeWidth:`${r}`,stroke:`url(#stroke-${i})`,fill:"none"})]})};var F=t(6727);let I=e=>{let{contestSlug:n,contestInfo:t,rankingInfo:f,myRankingInfo:h,ongoingStatus:p,rankingRegion:v,isDetail:k,className:y,controlledPage:j,setControlledPage:_}=e,b=(0,s.useRouter)(),{t:S}=(0,i.Bd)("contest",{keyPrefix:"rankingPage"}),[T,C]=(0,l.useState)(null),{width:E,height:D}=(0,o.s)(T),[R,I]=(0,l.useState)(1),L=j??R,A=_??I,O=p===g.c.NOT_START,M=p===g.c.STARTED,P=!!(null==t?void 0:t.isVirtual),Q=(0,l.useMemo)(()=>{let e=[];if(M&&!P){var n;let t=25*(L-1);e=(null==f?void 0:null===(n=f.rankings)||void 0===n?void 0:n.slice(t,t+25))??[]}else e=(null==f?void 0:f.rankings)??[];let t=(e=(0,r.A)(e)).length;return e.length=25,e.fill(void 0,t),e},[M,f,L,P]),B=O||!f||!f.rankings.length,V=null==h?void 0:h.userStatus.userSlug,W=!P&&V?Q.findIndex(e=>(null==e?void 0:e.userStatus.userSlug)===V)??-1:-1,G=k||!k&&-1!==W,K=(0,u._)(e=>{m.K.contestRankingPaginationClick({contest_is_virtual:String(P),contest_is_ongoing:String(M),contest_component_location:k?"detail":"qd"}),k?b.push({pathname:x.f0.contestRanking(n,e),query:{region:b.query.region}},void 0,{shallow:!0}):A(e)});return t?(0,a.jsxs)("div",{className:(0,c.xF)("flex flex-col items-center",y),children:[(0,a.jsxs)("div",{className:"text-text-secondary relative flex w-full text-sm font-medium",children:[(0,a.jsx)($,{rankingsData:Q,contestData:t,myRanking:h,isDetail:k,page:L,isContestOngoing:M,hideBody:B,rankingRegion:v,ongoingStatus:p,myRankingIndex:W}),(0,a.jsx)("div",{className:"w-full !overflow-x-auto",children:(0,a.jsxs)("div",{className:"flex min-w-[fit-content] flex-col",children:[k&&(0,a.jsx)(w,{questions:t.questions,contestSlug:t.titleSlug,className:(0,c.xF)({"opacity-0":!t.questions.length})}),k&&!!h&&(0,a.jsx)(N,{rankingData:h,contestData:t,isSelf:!0,index:0,isDetail:k,isContestOngoing:M,rankingRegion:v,className:(0,c.xF)("transition-opacity",{"opacity-0":B})}),Q.map((e,n)=>(0,a.jsx)(N,{rankingData:e,contestData:t,isSelf:!k&&n===W,index:n,isDetail:k,isContestOngoing:M,rankingRegion:v,className:(0,c.xF)("transition-opacity",{"opacity-0":B})},`${v}-${L}-${n}`))]})}),!!h&&G&&(0,a.jsx)("div",{className:(0,c.xF)("pointer-events-none absolute h-[50px] w-full transition-opacity",{"top-[50px]":k,"opacity-0":B}),ref:C,style:k?void 0:{top:`${50*W}px`},children:(0,a.jsx)(q,{width:E??0,height:D??0,animate:M})}),B&&(0,a.jsx)("div",{className:"text-sd-muted-foreground pointer-events-none absolute left-0 top-0 flex h-[600px] w-full flex-col items-center justify-center gap-4 text-base",children:f||O?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-[46px] leading-[24px]",children:"\uD83E\uDD1E"}),(0,a.jsx)("div",{children:S("emptyRankingPlaceholder")})]}):(0,a.jsx)(F.M,{className:"h-10 w-10"})})]}),(0,a.jsx)("div",{className:"flex h-[50px] w-full flex-none items-center justify-center py-1",children:!!f&&(0,a.jsx)(d.d,{currentPage:L,onChange:K,totalItems:(!P&&M?null==f?void 0:f.rankings.length:null==f?void 0:f.userCount)??0,maxPageItems:6,itemsPerPage:25,className:"gap-1.5 space-x-0",arrowButtonClassName:"p-[5px]",chevronClassName:"w-3.5 h-3.5",pageItemClassName:"h-6 min-w-[24px] text-xs px-2 py-[3px] flex item-center justify-center",activePageItemClassName:"dark:!bg-ranking-primary !bg-ranking-primary dark:!text-ranking-foreground !text-ranking-foreground"})})]}):null}},84499:(e,n,t)=>{t.d(n,{A:()=>y});var a=t(63064),s=t(86715),r=t(55373),i=t.n(r),l=t(96540),o=t(82046),u=t(42014),c=t(70071),d=t(5596),g=t(39614),m=t(304),x=t(13814),f=t(72187),h=t(59544);let p=g.Lb.GLOBAL,v=[g.Lb.LLM,g.Lb.GLOBAL],k=()=>{if(!(0,x.Bd)())return p;let e=i().parse(window.location.search,{ignoreQueryPrefix:!0}).region;return e&&v.includes(e)?e:p},y=e=>{let{contestSlug:n,pageFromRouter:t,enabledContestInfo:r,enabledRankingInfo:i,enabledMyRankingInfo:x,onlyFetchData:v=!1}=e,y=(0,a.jE)(),j=k(),[_,b]=(0,l.useState)(j),[w,S]=(0,l.useState)(1),N=(0,s.useRouter)(),{data:T,isLoading:C}=(0,m._)(n),E=(0,l.useCallback)(function(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],t={...N.query,region:e};null==t||delete t.contestSlug,null==t||delete t.page,N.replace({pathname:N.asPath.replace(/\?.*$/,""),query:t},void 0,{shallow:n})},[N]),D=(0,l.useCallback)(e=>{w>1?N.push({pathname:f.f0.contestRanking(n,1),query:{region:e}},void 0,{shallow:!0}):E(e)},[n,E,w,N]);(0,l.useEffect)(()=>{if(!C&&!v){if(!T&&j===g.Lb.LLM)return E(p,!1);E(j)}},[T,C]);let $=_===g.Lb.LLM;(0,l.useEffect)(()=>{C||b(j)},[C,j]);let{data:R,isInitialLoading:q}=(0,o.c)({contestSlug:n,enabled:r}),F=(0,d.r)(R),I=(0,l.useRef)(F),L=F===d.c.STARTED,A=F===d.c.END,O=!!(null==R?void 0:R.isVirtual),{setContestSlug:M,setIsVirtualContest:P,setIsContestOngoing:Q}=(0,h.B)(e=>e);(0,l.useEffect)(()=>M(n),[n,M]),(0,l.useEffect)(()=>P(O),[O,P]),(0,l.useEffect)(()=>Q(L),[L,Q]);let B=O&&!L,{data:V}=(0,c._)({contestSlug:n,region:_,enabled:x}),{data:W}=(0,u.I)({contestSlug:n,region:_,enabled:i&&!O&&L&&!$}),{data:G}=(0,u.TN)({contestSlug:n,region:_,pagination:w,enabled:i&&(O||A)&&!$,staleTime:B?0:void 0}),K=!O&&L?W:G;return(0,l.useEffect)(()=>{$||(L&&I.current===d.c.NOT_START&&y.invalidateQueries(["contest-info"]),A&&I.current===d.c.STARTED&&(y.invalidateQueries(["contest-ranking-page"]),y.invalidateQueries(["contest-my-ranking"])),I.current=F)},[F]),(0,l.useEffect)(()=>{if(!O||!L||$)return;let e=setInterval(()=>{y.invalidateQueries(["contest-my-ranking"])},6e4);return()=>clearInterval(e)},[O,L,y,$]),(0,l.useEffect)(()=>{t&&t>0&&S(t)},[t]),{isLoading:q,contestInfo:R,myRankingInfo:V,rankingInfo:K,ongoingStatus:F,setRankingRegion:D,rankingRegion:_,setPage:S,page:w}}},70071:(e,n,t)=>{t.d(n,{_:()=>c,k:()=>g});var a=t(9421),s=t(63064),r=t(96540),i=t(77961),l=t(82616),o=t(98031);let u=e=>{var n,t;return e.my_rank&&void 0!==e.my_rank.rank?{rank:e.my_rank.rank,up:!1,userStatus:{username:e.my_rank.real_name||e.my_rank.username,userSlug:e.my_rank.user_slug??e.my_rank.username,avatar:e.my_rank.avatar_url,color:e.my_rank.color??void 0,badge:e.my_rank.medal?{name:null===(n=e.my_rank.medal)||void 0===n?void 0:n.name,icon:null===(t=e.my_rank.medal)||void 0===t?void 0:t.icon}:void 0},region:e.my_rank.data_region,countryCode:e.my_rank.country_code,countryName:e.my_rank.country_name??"",score:e.my_rank.score,finishTime:e.my_rank.finish_time,submissions:Object.entries((null==e?void 0:e.my_submission)??{}).reduce((e,n)=>{let[t,a]=n;return e[t]={id:a.id,date:a.date,submissionId:a.submission_id,failCount:a.fail_count,lang:a.lang||""},e},{}),replays:e.my_rank.replays??{}}:null},c=e=>{let{contestSlug:n,region:t,enabled:s}=e;return(0,a.I)(["contest-my-ranking",{contestSlug:n,region:t}],()=>l.uE.request(l.vZ.contestMyRanking(n,t)).then(u),{enabled:s})},d=e=>({rank:e.rank,up:e.up,userStatus:{username:e.username,userSlug:e.user_slug,avatar:e.avatar_url,color:e.color??void 0,badge:e.medal?{name:e.medal.name,icon:e.medal.icon}:void 0},region:e.data_region,countryCode:e.country_code,countryName:e.country_name??"",score:e.score,finishTime:e.finish_time,replays:e.replays??{},submissions:Object.entries(e.submissions).reduce((e,n)=>{let[t,a]=n;return e[t]={id:a.id,date:a.date,submissionId:a.submission_id,failCount:a.fail_count,lang:a.lang||""},e},{})}),g=e=>{let{contestSlug:n,region:t,userSlug:a,enabled:l}=e,u=(0,s.jE)(),[c,g]=(0,r.useState)(0);return(0,r.useEffect)(()=>{if(!n||!a||!l)return;let e=new WebSocket(`wss://${o.V_}/myranking/${n}/${a}/?region=${t}`);return e.onclose=e=>{4e3!==e.code&&c<5&&setTimeout(()=>g(e=>e+1),3e3)},e.onmessage=e=>{let a=(0,i.N)(e.data);void 0!==a.rank&&null!==a.rank&&u.setQueryData(["contest-my-ranking",{contestSlug:n,region:t}],()=>d(a))},()=>{e.close(4e3)}},[c,n,a,l,t,u]),(0,r.useEffect)(()=>{g(0)},[n,a,l,t]),null}},5596:(e,n,t)=>{t.d(n,{c:()=>r,r:()=>i});var a=t(96540),s=t(72556),r=function(e){return e[e.NOT_START=0]="NOT_START",e[e.STARTED=1]="STARTED",e[e.END=2]="END",e}({});let i=e=>{let{currentTimeDelta:n,startTime:t,duration:r}=e??{},[i,l]=(0,a.useState)(void 0),o=(0,s._)(()=>{if(!n||!t||!r)return;let e=Math.floor(Date.now()/1e3+n-t);e<0?l(0):e<r?l(1):l(2)});return(0,a.useEffect)(()=>{o();let e=setInterval(o,1e3);return()=>clearInterval(e)},[n,t,r,o]),i}},42014:(e,n,t)=>{t.d(n,{I:()=>c,TN:()=>d,W4:()=>g});var a=t(9421),s=t(63064),r=t(96540),i=t(82616),l=t(77961),o=t(98031);let u=e=>{var n,t;return e.total_rank?{userCount:(null==e?void 0:e.user_num)??0,akStatus:{akCount:(null==e?void 0:null===(n=e.ak_info)||void 0===n?void 0:n.ak_num)??0,akAvatars:(null==e?void 0:null===(t=e.ak_info)||void 0===t?void 0:t.lastest_ak_avatars)??[]},rankings:e.total_rank.map(e=>({rank:e.rank,up:e.up,userStatus:{username:e.username,userSlug:e.user_slug??e.username,avatar:e.avatar_url,color:e.color??void 0,badge:e.medal?{name:e.medal.name,icon:e.medal.icon}:void 0},region:e.data_region,countryCode:e.country_code,countryName:e.country_name??"",score:e.score,finishTime:e.finish_time,submissions:Object.entries(e.submissions).reduce((e,n)=>{let[t,a]=n;return e[t]={id:a.id,date:a.date,submissionId:a.submission_id,failCount:a.fail_count,lang:a.lang||""},e},{}),replays:e.replays}))}:{userCount:0,akStatus:{akCount:0,akAvatars:[]},rankings:[]}},c=e=>{let{contestSlug:n,region:t,enabled:s}=e;return(0,a.I)(["contest-ranking-tops",{contestSlug:n,region:t}],()=>i.uE.request(i.vZ.contestRankingTop({contestTitleSlug:n,region:t})).then(u),{enabled:s})},d=e=>{let{contestSlug:n,region:t,pagination:s=1,enabled:r,staleTime:l}=e;return(0,a.I)(["contest-ranking-page",{contestSlug:n,region:t,pagination:s}],()=>i.uE.request(i.vZ.contestRankingPage({contestTitleSlug:n,region:t,pagination:s})).then(u),{enabled:r,staleTime:l})},g=e=>{let{contestSlug:n,region:t,enabled:a}=e,i=(0,s.jE)(),[c,d]=(0,r.useState)(0);return(0,r.useEffect)(()=>{if(!n||!a)return;let e=new WebSocket(`wss://${o.V_}/ranking/${n}/?region=${t}`);return e.onclose=e=>{4e3!==e.code&&c<5&&setTimeout(()=>d(e=>e+1),3e3)},e.onmessage=e=>{var a;let s=(0,l.N)(e.data);if(!s.total_rank)return;i.setQueryData(["contest-ranking-tops",{contestSlug:n,region:t}],()=>u(s));let r=Math.ceil(((null==s?void 0:null===(a=s.total_rank)||void 0===a?void 0:a.length)??0)/25);for(let e=1;e<r+1;e++){let a=(e-1)*25;i.setQueryData(["contest-ranking-page",{contestSlug:n,region:t,pagination:e}],()=>{var e;return u({...s,total_rank:(null==s?void 0:null===(e=s.total_rank)||void 0===e?void 0:e.slice(a,a+25))??[]})})}},()=>{e.close(4e3)}},[c,n,a,t,i]),(0,r.useEffect)(()=>{d(0)},[n,a,t]),null}},28140:(e,n,t)=>{t.d(n,{y:()=>r});var a=t(9640);let s=t(35593).ELA,r=()=>s(a.nS,{},{select:e=>!!e.enableRankingReplay})},304:(e,n,t)=>{t.d(n,{_:()=>l});var a=t(35593),s=t(9640);let r=()=>["leetcode.cn","leetcode.com","canary.leetcode.com",,"canary.leetcode.cn"].includes(window.location.host)?{biweekly:147,weekly:430}:{biweekly:120,weekly:400},i=(e,n)=>{if(!e)return!1;let t=n.split("-"),a=t[0],s=t[2];if(-1===["biweekly","weekly"].indexOf(a))return!1;let{biweekly:i,weekly:l}=r();return!("biweekly"===a&&Number(s)<i||"weekly"===a&&Number(s)<l)},l=e=>(0,a.uEn)(s.nS,{},{select:n=>i(n.enableLlmRanking,e)})},58738:(e,n,t)=>{t.d(n,{Gg:()=>s,V6:()=>a,sQ:()=>r});let a="\xa9leetcode",s=/Â©leetcode/g,r=e=>({isFromInside:e.endsWith(a)})},778:(e,n,t)=>{t.d(n,{q:()=>f});var a=t(74848),s=t(49938),r=t(1371),i=t(6585),l=t(76385),o=t(96540),u=t(72556),c=t(94911),d=t(82479),g=t(58738),m=t(42024),x=t(9387);let f=e=>{let{setEditor:n,value:t,language:f,readOnly:h,onChange:p,onCursorChange:v,className:k,extensions:y,tabSize:j}=e,_=e=>e.replace(g.V6,""),[b,w]=(0,o.useState)(null),[S,N]=(0,o.useState)(1),[T,C]=(0,o.useState)(1),E=(0,u._)(v),D=(0,c.h)(),{shortcuts:$}=(0,x.Dc)(),R=(0,u._)(p),q=(0,o.useMemo)(()=>(0,m.O4)(D),[D]),F=(0,o.useMemo)(()=>[...$.enableQuickSubmit?[{key:"Mod-Enter",run:()=>!0}]:[]],[$.enableQuickSubmit]),I=(0,o.useMemo)(()=>{let e=(0,m.AN)(f),n=(0,m.Nq)(),t=[r.Lz.clipboardInputFilter.of(_)];return[...e?[e]:[],r.w4.of(l.w),i.Nb.highest(r.w4.of(F)),n,...t,...(null==y?void 0:y.length)?y:[]]},[F,y,f]),L=(0,u._)(e=>{null==R||R(e)}),A=(0,u._)(e=>{let n=e.state.selection.main.head,t=e.state.doc.lineAt(n);N(t.number),C(n-t.from+1)});return(0,o.useEffect)(()=>{null==n||n(b)},[b,n]),(0,o.useEffect)(()=>{E(S,T)},[T,S,E]),(0,a.jsx)("div",{className:(0,d.xF)("flex flex-1 flex-col overflow-hidden",k),translate:"no",children:(0,a.jsx)("div",{className:(0,d.xF)("flex-1 overflow-hidden"),children:(0,a.jsx)(s.Ay,{ref:w,value:t,theme:q,extensions:I,height:"auto",basicSetup:{autocompletion:!1,bracketMatching:!1,tabSize:j},readOnly:h,onChange:L,onUpdate:A,style:{fontSize:"13px"}})})})}},42024:(e,n,t)=>{t.d(n,{AN:()=>u,Nq:()=>g,O4:()=>d,X8:()=>c});var a=t(83235),s=t(49075),r=t(65579),i=t(25038),l=t(11315),o=t(25008);let u=e=>{switch(e){case"python":case"python3":case"pythondata":return a.cg.python();case"c":return a.cg.c();case"cpp":case"cangjie":return a.cg.cpp();case"csharp":return a.cg.csharp();case"java":return a.cg.java();case"javascript":case"vanillajs":return a.cg.javascript();case"typescript":return a.cg.typescript();case"ruby":return a.cg.ruby();case"golang":return a.cg.go();case"swift":return a.cg.swift();case"scala":return a.cg.scala();case"kotlin":return a.cg.kotlin();case"rust":return a.cg.rust();case"bash":return a.cg.shell();case"mysql":return a.cg.sql({dialect:s.MySQL});case"mssql":return a.cg.sql({dialect:s.MSSQL});case"oraclesql":return a.cg.sql({dialect:s.PLSQL});case"php":return a.cg.php({plain:!0});case"racket":return a.cg.scheme();case"erlang":case"elixir":return a.cg.erlang();case"dart":return a.cg.dart();case"react":return a.cg.jsx();case"postgresql":return a.cg.sql({dialect:s.PostgreSQL});default:return null}},c=e=>"vim"===e?[(0,l.Pk)({status:!0})]:"emacs"===e?[(0,i.Ks)()]:[],d=e=>e?(0,r.xO)({settings:{background:"transparent",gutterBackground:"#262626",foreground:"#d4d4d4"}}):(0,r.JL)({theme:"light",settings:{background:"transparent",gutterBackground:"#ffffff",lineHighlight:"#00000009"}}),g=()=>(0,o.h)({colors:{light:"#d3d3d3",dark:"#404040",activeLight:"#939393",activeDark:"#707070"}})}}]);